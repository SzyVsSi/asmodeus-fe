{"version":3,"file":"CodeCheckInput-B-3lpaGn.js","sources":["../../src/common/components/CodeCheckInput.tsx"],"sourcesContent":["import type { ApiRoom } from '@/core/api/types';\nimport type { Routes } from '@/core/router/routes';\nimport { gameSessionsModule } from '@/core/services/apiInitializer';\nimport { SessionStorageService } from '@/util/sessionStorage';\nimport clsx from 'clsx';\nimport { type SubmitHandler, useForm } from 'react-hook-form';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\n\ntype Inputs = {\n\tcode: string;\n};\n\ntype Props = {\n\troom: ApiRoom;\n\tto: Routes;\n\tformClassName?: string;\n\tinputClassName?: string;\n\tbuttonClassName?: string;\n\tplaceholder?: string;\n};\n\nexport const CodeCheckForm = ({\n\troom,\n\tto,\n\tformClassName,\n\tinputClassName,\n\tbuttonClassName,\n\tplaceholder,\n}: Props) => {\n\tconst { t } = useTranslation('common');\n\tconst { useCheckCode } = gameSessionsModule;\n\tconst navigate = useNavigate();\n\tconst { checkCode, isPending } = useCheckCode();\n\tconst { register, handleSubmit } = useForm<Inputs>();\n\n\tconst onSubmit: SubmitHandler<Inputs> = async ({ code }) => {\n\t\tconst token = SessionStorageService.getItem('token');\n\t\tif (!token) return;\n\t\tawait checkCode({ code, room, token });\n\t\tSessionStorageService.setItem(room, 'true');\n\t\tnavigate(to);\n\t};\n\n\treturn (\n\t\t<form className={formClassName} onSubmit={handleSubmit(onSubmit)}>\n\t\t\t<input\n\t\t\t\ttype='text'\n\t\t\t\tclassName={inputClassName}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\t{...register('code', { required: true })}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype='submit'\n\t\t\t\tclassName={clsx(buttonClassName, {\n\t\t\t\t\t'opacity-50': isPending,\n\t\t\t\t\t'cursor-not-allowed': isPending,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{isPending ? `${t('checking')}...` : t('check')}\n\t\t\t</button>\n\t\t</form>\n\t);\n};\n"],"names":["CodeCheckForm","room","to","formClassName","inputClassName","buttonClassName","placeholder","t","useTranslation","useCheckCode","gameSessionsModule","navigate","useNavigate","checkCode","isPending","register","handleSubmit","useForm","onSubmit","code","token","SessionStorageService","jsx","clsx"],"mappings":"2MAsBO,MAAMA,EAAgB,CAAC,CAC7B,KAAAC,EACA,GAAAC,EACA,cAAAC,EACA,eAAAC,EACA,gBAAAC,EACA,YAAAC,CACD,IAAa,CACZ,KAAM,CAAE,EAAAC,CAAA,EAAMC,EAAe,QAAQ,EAC/B,CAAE,aAAAC,CAAiB,EAAAC,EACnBC,EAAWC,IACX,CAAE,UAAAC,EAAW,UAAAC,CAAU,EAAIL,EAAa,EACxC,CAAE,SAAAM,EAAU,aAAAC,CAAa,EAAIC,EAAgB,EAE7CC,EAAkC,MAAO,CAAE,KAAAC,KAAW,CACrD,MAAAC,EAAQC,EAAsB,QAAQ,OAAO,EAC9CD,IACL,MAAMP,EAAU,CAAE,KAAAM,EAAM,KAAAlB,EAAM,MAAAmB,CAAO,CAAA,EACfC,EAAA,QAAQpB,EAAM,MAAM,EAC1CU,EAAST,CAAE,EAAA,EAGZ,cACE,OAAK,CAAA,UAAWC,EAAe,SAAUa,EAAaE,CAAQ,EAC9D,SAAA,CAAAI,EAAA,IAAC,QAAA,CACA,KAAK,OACL,UAAWlB,EACX,YAAAE,EACC,GAAGS,EAAS,OAAQ,CAAE,SAAU,GAAM,CAAA,CACxC,EACAO,EAAA,IAAC,SAAA,CACA,KAAK,SACL,UAAWC,EAAKlB,EAAiB,CAChC,aAAcS,EACd,qBAAsBA,CAAA,CACtB,EAEA,WAAY,GAAGP,EAAE,UAAU,CAAC,MAAQA,EAAE,OAAO,CAAA,CAC/C,CACD,CAAA,CAAA,CAEF"}