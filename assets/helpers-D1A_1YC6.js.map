{"version":3,"file":"helpers-D1A_1YC6.js","sources":["../../src/core/router/helpers.tsx"],"sourcesContent":["import type { ComponentType } from 'react';\nimport { Navigate } from 'react-router-dom';\n\nimport { SessionStorageService } from '@/util/sessionStorage';\nimport type { ApiRoom } from '../api/types';\nimport { Routes } from './routes';\n\nconst redirects: Record<ApiRoom | 'run', Routes> = {\n\troom_one: Routes.Home,\n\troom_two: Routes.TheDeed,\n\troom_three: Routes.JohnDoeShow,\n\trun: Routes.TheTruth,\n};\n\nexport const withRedirectToHome = <T extends object>(\n\tComponent: ComponentType<T>,\n) => {\n\treturn (props: T) => {\n\t\tif (import.meta.env.DEV) {\n\t\t\treturn <Component {...props} />;\n\t\t}\n\n\t\tconst token = SessionStorageService.getItem('token');\n\t\tif (!token) {\n\t\t\treturn <Navigate to={Routes.Home} replace />;\n\t\t}\n\n\t\treturn <Component {...props} />;\n\t};\n};\n\nexport const withRedirect = <T extends object>(\n\tComponent: ComponentType<T>,\n\troomToCheck: ApiRoom | 'run',\n) => {\n\treturn (props: T) => {\n\t\tif (import.meta.env.DEV) {\n\t\t\treturn <Component {...props} />;\n\t\t}\n\n\t\tconst token = SessionStorageService.getItem('token');\n\t\tif (!token) {\n\t\t\treturn <Navigate to={Routes.Home} replace />;\n\t\t}\n\n\t\tconst isRoomToCheckValid =\n\t\t\tSessionStorageService.getItem(roomToCheck) === 'true';\n\t\tif (!isRoomToCheckValid) {\n\t\t\treturn <Navigate to={redirects[roomToCheck]} replace />;\n\t\t}\n\n\t\treturn <Component {...props} />;\n\t};\n};\n"],"names":["redirects","Routes","withRedirectToHome","Component","props","SessionStorageService","jsx","Navigate","withRedirect","roomToCheck"],"mappings":"uGAOA,MAAMA,EAA6C,CAClD,SAAUC,EAAO,KACjB,SAAUA,EAAO,QACjB,WAAYA,EAAO,YACnB,IAAKA,EAAO,QACb,EAEaC,EACZC,GAEQC,GAKOC,EAAsB,QAAQ,OAAO,EAK3CC,EAAA,IAAAH,EAAW,CAAA,GAAGC,CAAO,CAAA,QAHpBG,EAAS,CAAA,GAAIN,EAAO,KAAM,QAAO,GAAC,EAOhCO,EAAe,CAC3BL,EACAM,IAEQL,GAKOC,EAAsB,QAAQ,OAAO,EAMlDA,EAAsB,QAAQI,CAAW,IAAM,OAKxCH,EAAA,IAAAH,EAAW,CAAA,GAAGC,CAAO,CAAA,QAHpBG,EAAS,CAAA,GAAIP,EAAUS,CAAW,EAAG,QAAO,EAAA,CAAC,QAN7CF,EAAS,CAAA,GAAIN,EAAO,KAAM,QAAO,GAAC"}